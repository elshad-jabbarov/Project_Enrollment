version: 2.0

jobs:
  build:
    docker:
      - image: circleci/openjdk:11.0.1-jdk
        auth:
          username: $DOCKER_PASS
          password: $DOCKER_USER  # context / project UI env-var reference
    steps:
      - checkout
      - run: ./mvnw package
      # package into a jar
      - run: mvn clean package
      - run: mvn clean compile jib:build -Djib.to.auth.username=$DOCKER_USER -Djib.to.auth.password=$DOCKER_PASS -Dimage=elshad1/project_enrollment:$CIRCLE_BUILD_NUM